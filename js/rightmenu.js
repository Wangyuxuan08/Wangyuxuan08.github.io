"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function insertAtCursor(e,t){var o,n,i;document.selection?(e.focus(),(sel=document.selection.createRange()).text=t,sel.select()):e.selectionStart||"0"==e.selectionStart?(o=e.selectionStart,n=e.selectionEnd,i=e.scrollTop,e.value=e.value.substring(0,o)+t+e.value.substring(n,e.value.length),0<i&&(e.scrollTop=i),e.focus(),e.selectionStart=o+t.length,e.selectionEnd=o+t.length):(e.value+=t,e.focus())}console.log("Codes uses GPL Licence");var rmf={};function popupMenu(){window.oncontextmenu=function(e){if(e.ctrlKey)return!0;console.log(e.keyCode),$(".rightMenu-group.hide").hide(),document.getSelection().toString()&&$("#menu-text").show(),(document.getElementById("post")||document.getElementById("page"))&&$("#menu-post").show();var o=window.document.body,o=e.target,t=(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/.test(window.getSelection().toString())&&$("#menu-too").show(),"A"==o.tagName&&($("#menu-to").show(),rmf.open=function(){location.href=o.href},rmf.openWithNewTab=function(){window.open(o.href)},rmf.copyLink=function(){var e=o.href,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)}),"IMG"==o.tagName?($("#menu-img").show(),rmf.openWithNewTab=function(){window.open(o.src)},rmf.click=function(){o.click()},rmf.copyLink=function(){var e=o.src,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)}):"TEXTAREA"!=o.tagName&&"INPUT"!=o.tagName||($("#menu-paste").show(),rmf.paste=function(){navigator.permissions.query({name:"clipboard-read"}).then(function(e){"granted"==e.state||"prompt"==e.state?navigator.clipboard.readText().then(function(e){console.log(e),insertAtCursor(o,e)}):alert("请允许读取剪贴板！")})}),e.clientX+10),e=e.clientY,n=$("#rightMenu").width(),i=$("#rightMenu").height();return t+n>window.innerWidth&&(t-=n+10),e+i>window.innerHeight&&(e-=e+i-window.innerHeight),rmf.showRightMenu(!0,e,t),!1},window.addEventListener("click",function(){rmf.showRightMenu(!1)})}rmf.showRightMenu=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=$("#rightMenu");n.css("top",t+"px").css("left",o+"px"),e?n.show():n.hide()},rmf.switchDarkMode=function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"===("undefined"==typeof FB?"undefined":_typeof(FB))&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout(function(){return window.disqusReset()},200)},rmf.copyWordsLink=function(){var e=window.location.href,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),Swal.fire("复制成功！")},rmf.switchReadMode=function(){var t=document.body,o=(t.classList.add("read-mode"),document.createElement("button"));o.type="button",o.className="fas fa-sign-out-alt exit-readmode",t.appendChild(o),o.addEventListener("click",function e(){t.classList.remove("read-mode"),o.remove(),o.removeEventListener("click",e)})},rmf.copySelect=function(){document.execCommand("Copy",!1,null),Snackbar.show({text:"吾辈宣布你的剪贴板我占领了",pos:"top-center"})},rmf.scrollToTop=function(){btf.scrollToDest(0,500)},rmf.translate=function(){document.getElementById("translateLink").click()},document.onkeydown=function(e){17==(e=e||window.event).keyCode&&console.log("你知道的太多了")},navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||popupMenu();var box=document.documentElement;function addLongtabListener(e,t){var o=0;e.ontouchstart=function(){o=0,o=setTimeout(function(){t(),o=0},380)},e.ontouchmove=function(){clearTimeout(o),o=0},e.ontouchend=function(){o&&clearTimeout(o)}}addLongtabListener(box,popupMenu);