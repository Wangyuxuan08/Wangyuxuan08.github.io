"use strict";var percentFlag=!(window.onkeydown=function(e){123===e.keyCode&&btf.snackbarShow("开发者模式已打开，请遵循GPL协议",!1,3e3)});function essayScroll(){var e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight,e=(result<=99||(result=99),!percentFlag&&100+e>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout(function(){waterfall("#waterfall")},500):setTimeout(function(){document.querySelector("#waterfall")&&waterfall("#waterfall")},500),window.scrollY+document.documentElement.clientHeight),t=document.getElementById("post-comment")||document.getElementById("footer");(t.offsetTop+t.offsetHeight/2<e||90<result)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var anzhiyu={diffDate:function(e){var t,n,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=new Date,e=new Date(e),o=o.getTime()-e.getTime(),l=864e5;return a?(a=o/l,t=o/36e5,n=o/6e4,1<=o/2592e6?e.toLocaleDateString().replace(/\//g,"-"):1<=a?parseInt(a)+" "+GLOBAL_CONFIG.date_suffix.day:1<=t?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:1<=n?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just):parseInt(o/l)},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach(function(e){var t=e.getAttribute("datetime");e.innerText=anzhiyu.diffDate(t,!0),e.style.display="inline"})},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout(function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")},500)},commentText:function(e){"undefined"!=e&&"null"!=e||(e="好棒！");var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");t&&(n.initEvent("input",!0,!0),e=replaceAll(e,"\n","\n> "),t.value="> "+e+"\n\n",t.dispatchEvent(n),e=document.querySelector("#post-comment").offsetTop,window.scrollTo(0,e-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips"))&&document.getElementById("comment-tips").classList.add("show")},initIndexEssay:function(){setTimeout(function(){var e=new Swiper(".essay_bar_swiper_container",{passiveListeners:!0,direction:"vertical",loop:!0,autoplay:{disableOnInteraction:!0,delay:3e3},mousewheel:!0}),t=document.getElementById("bbtalk");null!==t&&(t.onmouseenter=function(){e.autoplay.stop()},t.onmouseleave=function(){e.autoplay.start()})},100)}};function switchCommentBarrage(){var e=window.localStorage.getItem("commentBarrageDisplay");document.getElementById("comment-barrage").style.display="false"===e?"block":"none",window.localStorage.setItem("commentBarrageDisplay","false"===e?"undefined":"false",864e5)}anzhiyu.initIndexEssay(),anzhiyu.changeTimeInEssay(),anzhiyu.reflashEssayWaterFall();